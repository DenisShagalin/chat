(this.webpackJsonphelloworld=this.webpackJsonphelloworld||[]).push([[0],{103:function(e,t,a){e.exports=a(174)},112:function(e,t,a){},113:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},146:function(e,t){},149:function(e,t,a){},150:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),s=a.n(r),o=a(18),l=a(13),u=a(19),i=Object(u.a)({basename:"/"}),m=(a(112),a(16)),d=a(21),p=a(39),b=a(7),h=a(207),f=Object(b.a)({root:{background:"#27292D"},input:{color:"#ECECEC"}})((function(e){var t,a=e.classes,n=e.value,r=e.onChange,s=e.label,o=e.type;return c.a.createElement(h.a,(t={label:s,value:n,onChange:r,className:a.root,InputProps:{className:a.input}},Object(p.a)(t,"className","s_input"),Object(p.a)(t,"type",o),t))})),v=a(208),E=function(e){var t=e.title,a=e.onClick,n=e.disabled;return c.a.createElement(v.a,{variant:"outlined",onClick:a,className:"s_button",disabled:n},t)},g=function(e){return{type:"@auth/SET_AUTH_DATA",payload:{user:e.user,token:e.token}}},O=(a(113),Object(o.b)((function(){return{}}),{signIn:function(e){return{type:"@auth/SIGN_IN",payload:e}}})((function(e){var t=e.signIn,a=Object(n.useState)(""),r=Object(m.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)(""),u=Object(m.a)(l,2),i=u[0],p=u[1];return c.a.createElement("div",{className:"signin__container"},c.a.createElement(f,{label:"Nickname",value:s,onChange:function(e){return o(e.target.value)},className:"s_input"}),c.a.createElement(f,{label:"Password",value:i,onChange:function(e){return p(e.target.value)},className:"s_input",type:"password"}),c.a.createElement(E,{title:"Confirm",disabled:!s||!i,onClick:function(){t({nick:s,password:i})}}),c.a.createElement(d.a,{to:"/signup"},"Registration"))}))),k=(a(115),Object(o.b)((function(){return{}}),{signUp:function(e){return{type:"@auth/SIGN_UP",payload:e}}})((function(e){var t=e.signUp,a=Object(n.useState)(""),r=Object(m.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)(""),u=Object(m.a)(l,2),i=u[0],p=u[1],b=Object(n.useState)(""),h=Object(m.a)(b,2),v=h[0],g=h[1],O=Object(n.useState)(""),k=Object(m.a)(O,2),j=k[0],_=k[1],N=!!s&&!!i&&!!j;return c.a.createElement("div",{className:"signup__container"},c.a.createElement(f,{label:"Nickname *",value:s,onChange:function(e){return o(e.target.value)},className:"s_input"}),c.a.createElement(f,{label:"Password *",value:i,onChange:function(e){return p(e.target.value)},className:"s_input",type:"password"}),c.a.createElement(f,{label:"Name",value:v,onChange:function(e){return g(e.target.value)},className:"s_input"}),c.a.createElement(f,{label:"Email *",value:j,onChange:function(e){return _(e.target.value)},className:"s_input"}),c.a.createElement(E,{title:"Register",disabled:!s||!i,onClick:function(){N&&t({nick:s,password:i,name:v,email:j})}}),c.a.createElement(d.a,{to:"/signin"},"Back"))}))),j=(a(116),a(91)),_=a.n(j),N=function(e){return _()("http://82902a230f3b.ngrok.io",{query:{token:e}})},y=Object(o.b)((function(e){return{token:e.auth.token}}),{})((function(e){var t=e.token,a=Object(n.useState)(""),r=Object(m.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)([]),u=Object(m.a)(l,2),i=u[0],p=u[1];return Object(n.useEffect)((function(){var e=N(t);return e.emit("chats",{search:s}),e.on("chats",p),function(){e.off("chats")}}),[s]),c.a.createElement("div",{className:"chat__container"},c.a.createElement("div",{className:"chat_plus"},c.a.createElement(d.a,{to:"/create"},c.a.createElement(E,{title:"+"}))),c.a.createElement("input",{value:s,placeholder:"Search...",onChange:function(e){return o(e.target.value)}}),c.a.createElement("div",{className:"chat_list"},i.map((function(e,t){return c.a.createElement(d.a,{key:t,to:"/chat/".concat(e.id)},e.name)}))))})),C=(a(149),Object(o.b)((function(e){return{id:e.auth.user.id,token:e.auth.token}}),{})((function(e){var t=e.id,a=e.token,r=Object(n.useState)(""),s=Object(m.a)(r,2),o=s[0],l=s[1],u=N(a);return c.a.createElement("div",{className:"create-chat__container"},c.a.createElement("div",{className:"chat_plus"},c.a.createElement(d.a,{to:"/"},c.a.createElement(E,{title:"Back"}))),c.a.createElement("div",{className:"create-chat__data"},c.a.createElement(f,{label:"Chat Name",value:o,onChange:function(e){return l(e.target.value)},className:"s_input"}),c.a.createElement(E,{title:"Create",disabled:!o,onClick:function(){u.emit("create_chat",{name:o,creator:t}),i.push("/")}})))}))),I=a(203),w=function(e){var t=e.data,a=e.userId,n=e.onClick;return c.a.createElement("span",{onClick:function(){t.user&&a!==t.user.id&&n(t.user)}},t.user&&t.user.nick)},S=(a(150),Object(o.b)((function(e){return{userId:e.auth.user.id,token:e.auth.token}}),{})((function(e){var t=e.userId,a=e.token,r=Object(n.useState)(""),s=Object(m.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)(""),p=Object(m.a)(u,2),b=p[0],h=p[1],f=Object(n.useState)([]),v=Object(m.a)(f,2),g=v[0],O=v[1],k=Object(n.useState)([]),j=Object(m.a)(k,2),_=j[0],y=j[1],C=Object(n.useState)(null),S=Object(m.a)(C,2),x=S[0],A=S[1],T=function(e){var t=e.split("/");return t[t.length-1]}(i.location.pathname),P=N(a);Object(n.useEffect)((function(){return P.emit("entry_to_chat",{userId:t,chatId:T}),P.on("chat_members/".concat(T),O),P.on("messages/".concat(T,"/").concat(t),y),function(){P.emit("leave_chat",{userId:t,chatId:T}),P.off("chat_members/".concat(T)),P.off("messages/".concat(T,"/").concat(t))}}),[]);return c.a.createElement("div",{className:"chat_body"},c.a.createElement("div",{className:"chat_body_leave"},c.a.createElement(d.a,{to:"/"},c.a.createElement(E,{title:"Leave Chat"}))),c.a.createElement("div",{className:"chat_body_wrap"},x&&c.a.createElement("div",{className:"private"},c.a.createElement("div",{className:"chat_body_leave"},c.a.createElement(E,{title:"Close",onClick:function(){A(null),l("")}})),c.a.createElement(I.a,{"aria-label":"empty textarea",onChange:function(e){return h(e.target.value)},value:b}),c.a.createElement(E,{title:"Send",onClick:function(){P.emit("send_message",{msgOptions:{type:"private",message:b,chatId:T,userId:t,recipientId:x.id},userOptions:{chatId:T,userId:t}}),A(null),h("")},disabled:!b})),c.a.createElement("div",{className:"chat_body_members"},g.map((function(e,a){return c.a.createElement(w,{key:a,data:e,onClick:A,userId:t})}))),c.a.createElement("div",{className:"chat_body_messages"},c.a.createElement("div",{className:"messages_list"},_.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement("span",{className:"msg_name"},e.user&&e.user.nick),c.a.createElement("span",{className:"msg_msg"},e.message))}))),c.a.createElement("div",{className:"messages_inputs"},c.a.createElement(I.a,{"aria-label":"empty textarea",onChange:function(e){return l(e.target.value)},value:o,className:"message_input"}),c.a.createElement(E,{title:"Send",disabled:!o,onClick:function(){P.emit("send_message",{msgOptions:{type:"public",message:o,chatId:T,userId:t,recipientId:null},userOptions:{chatId:T,userId:t}}),l("")}})))))}))),x=function(){return c.a.createElement(l.c,{history:i},c.a.createElement(l.d,null,c.a.createElement(l.b,{exact:!0,path:"/",component:y}),c.a.createElement(l.b,{path:"/create",component:C}),c.a.createElement(l.b,{path:"/chat/:id",component:S}),c.a.createElement(l.a,{to:"/"})))},A=Object(o.b)((function(e){return{token:e.auth.token}}),{})((function(e){var t=e.token;return c.a.createElement(l.c,{history:i},c.a.createElement("div",{className:"app"},t?c.a.createElement(l.d,null,c.a.createElement(l.b,{path:"/",component:x}),c.a.createElement(l.a,{to:"/"})):c.a.createElement(l.d,null,c.a.createElement(l.b,{exact:!0,path:"/signin",component:O}),c.a.createElement(l.b,{path:"/signup",component:k}),c.a.createElement(l.a,{to:"/signin"}))))})),T=a(92),P=a(17),U=a(62),B=a(97),D=a(93),G=a(94),L=a.n(G),R=a(61),W={user:{},token:null};var z=Object(P.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@auth/SET_AUTH_DATA":return Object(R.a)(Object(R.a)({},e),{},{user:t.payload.user,token:t.payload.token});default:return e}}}),H=a(25),J=a.n(H),q=a(27),F=a(95),M=a.n(F),$=a(96),K=a.n($);function Q(e){var t=e.method,a=e.url,n=e.data,c=e.params,r=localStorage.getItem("auth"),s={method:t.toLowerCase(),url:"http://82902a230f3b.ngrok.io"+a,params:c,paramsSerializer:function(e){return K.a.stringify(e,{arrayFormat:"repeat"})}};return n&&(s.data=n),s.headers={"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},r&&(s.headers={Authorization:"Bearer "+r}),M()(s)}var V=J.a.mark(Z),X=J.a.mark(ee),Y=J.a.mark(te);function Z(e){var t;return J.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,localStorage.removeItem("auth"),a.next=4,Object(q.b)(Q,{url:"/signin",method:"POST",data:e.payload});case 4:return t=a.sent,localStorage.setItem("auth",t.data.token),a.next=8,Object(q.c)(g({token:t.data.token,user:t.data.user}));case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),V,null,[[0,10]])}function ee(e){var t;return J.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(q.b)(Q,{url:"/signup",method:"POST",data:e.payload});case 3:return t=a.sent,localStorage.setItem("auth",t.data.token),a.next=7,Object(q.c)(g({token:t.data.token,user:t.data.user}));case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),X,null,[[0,9]])}function te(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.d)("@auth/SIGN_IN",Z);case 2:return e.next=4,Object(q.d)("@auth/SIGN_UP",ee);case 4:case"end":return e.stop()}}),Y)}var ae=J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.a)([te()]);case 2:case"end":return e.stop()}}),e)})),ne=Object(D.composeWithDevTools)({maxAge:25,latency:1500}),ce=Object(B.a)(),re={key:"Chat",storage:L.a,blacklist:[]},se=Object(U.a)(re,z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=function(){var e=Object(P.createStore)(se,ne(Object(P.applyMiddleware)(ce)));return ce.run(ae),{persistor:Object(U.b)(e),store:e}}(),le=oe.persistor,ue=oe.store,ie=function(){s.a.render(c.a.createElement(o.a,{store:ue},c.a.createElement(T.a,{persistor:le},c.a.createElement(A,null))),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",(function(){ie()}),!1):ie(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);
//# sourceMappingURL=main.16378dfd.chunk.js.map