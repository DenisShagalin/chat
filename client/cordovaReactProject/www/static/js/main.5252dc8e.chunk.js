(this.webpackJsonphelloworld=this.webpackJsonphelloworld||[]).push([[0],{103:function(e,t,a){e.exports=a(174)},112:function(e,t,a){},113:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},147:function(e,t){},150:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),s=a.n(r),o=a(20),l=a(13),u=a(21),i=Object(u.a)({basename:"/"}),m=(a(112),a(17)),d=a(23),p=a(40),h=a(7),b=a(207),f=Object(h.a)({root:{background:"#27292D"},input:{color:"#ECECEC"}})((function(e){var t,a=e.classes,n=e.value,r=e.onChange,s=e.label,o=e.type;return c.a.createElement(b.a,(t={label:s,value:n,onChange:r,className:a.root,InputProps:{className:a.input}},Object(p.a)(t,"className","s_input"),Object(p.a)(t,"type",o),t))})),v=a(208),E=function(e){var t=e.title,a=e.onClick,n=e.disabled;return c.a.createElement(v.a,{variant:"outlined",onClick:a,className:"s_button",disabled:n},t)},g=function(e){return{type:"@auth/SET_AUTH_DATA",payload:{user:e.user,token:e.token}}},O=(a(113),Object(o.b)((function(){return{}}),{signIn:function(e){return{type:"@auth/SIGN_IN",payload:e}}})((function(e){var t=e.signIn,a=Object(n.useState)(""),r=Object(m.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)(""),u=Object(m.a)(l,2),i=u[0],p=u[1];return c.a.createElement("div",{className:"signin__container"},c.a.createElement(f,{label:"Nickname",value:s,onChange:function(e){return o(e.target.value)},className:"s_input"}),c.a.createElement(f,{label:"Password",value:i,onChange:function(e){return p(e.target.value)},className:"s_input",type:"password"}),c.a.createElement(E,{title:"Confirm",disabled:!s||!i,onClick:function(){t({nick:s,password:i})}}),c.a.createElement(d.a,{to:"/signup"},"Registration"))}))),_=(a(115),Object(o.b)((function(){return{}}),{signUp:function(e){return{type:"@auth/SIGN_UP",payload:e}}})((function(e){var t=e.signUp,a=Object(n.useState)(""),r=Object(m.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)(""),u=Object(m.a)(l,2),i=u[0],p=u[1],h=Object(n.useState)(""),b=Object(m.a)(h,2),v=b[0],g=b[1],O=Object(n.useState)(""),_=Object(m.a)(O,2),j=_[0],k=_[1],y=!!s&&!!i&&!!j;return c.a.createElement("div",{className:"signup__container"},c.a.createElement(f,{label:"Nickname *",value:s,onChange:function(e){return o(e.target.value)},className:"s_input"}),c.a.createElement(f,{label:"Password *",value:i,onChange:function(e){return p(e.target.value)},className:"s_input",type:"password"}),c.a.createElement(f,{label:"Name",value:v,onChange:function(e){return g(e.target.value)},className:"s_input"}),c.a.createElement(f,{label:"Email *",value:j,onChange:function(e){return k(e.target.value)},className:"s_input"}),c.a.createElement(E,{title:"Register",disabled:!s||!i,onClick:function(){y&&t({nick:s,password:i,name:v,email:j})}}),c.a.createElement(d.a,{to:"/signin"},"Back"))}))),j=(a(116),Object(o.b)((function(e){return{chats:e.chat.chats}}),{loadAllChats:function(e){return{type:"@chat/GET_ALL_CHATS",payload:e}}})((function(e){var t=e.chats,a=e.loadAllChats,r=Object(n.useState)(""),s=Object(m.a)(r,2),o=s[0],l=s[1];return Object(n.useEffect)((function(){a(o)}),[o]),c.a.createElement("div",{className:"chat__container"},c.a.createElement("div",{className:"chat_plus"},c.a.createElement(d.a,{to:"/create"},c.a.createElement(E,{title:"+"}))),c.a.createElement("input",{value:o,placeholder:"Search...",onChange:function(e){return l(e.target.value)}}),c.a.createElement("div",{className:"chat_list"},t.map((function(e){return c.a.createElement(d.a,{to:"/chat/".concat(e.id)},e.name)}))))}))),k=(a(117),Object(o.b)((function(e){return{id:e.auth.user.id}}),{createChat:function(e,t){return{type:"@chat/CREATE_CHAT",payload:{name:e,creator:t}}}})((function(e){var t=e.id,a=e.createChat,r=Object(n.useState)(""),s=Object(m.a)(r,2),o=s[0],l=s[1];return c.a.createElement("div",{className:"create-chat__container"},c.a.createElement("div",{className:"chat_plus"},c.a.createElement(d.a,{to:"/"},c.a.createElement(E,{title:"Back"}))),c.a.createElement("div",{className:"create-chat__data"},c.a.createElement(f,{label:"Chat Name",value:o,onChange:function(e){return l(e.target.value)},className:"s_input"}),c.a.createElement(E,{title:"Create",disabled:!o,onClick:function(){a(o,t),i.push("/")}})))}))),y=a(203),C=a(91),N=a.n(C),w=(a(150),Object(o.b)((function(e){return{userId:e.auth.user.id,token:e.auth.token}}),{})((function(e){var t=e.userId,a=e.token,r=Object(n.useState)(""),s=Object(m.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)([]),p=Object(m.a)(u,2),h=p[0],b=p[1],f=Object(n.useState)([]),v=Object(m.a)(f,2),g=v[0],O=v[1],_=function(e){var t=e.split("/");return t[t.length-1]}(i.location.pathname),j=N()("http://localhost:8001",{query:{token:a}});Object(n.useEffect)((function(){return j.emit("entry_to_chat",{userId:t,chatId:_}),j.on("chat_members/".concat(_),(function(e){b(e)})),j.on("messages/".concat(_),(function(e){O(e)})),function(){j.emit("leave_chat",{userId:t,chatId:_}),j.off("chat_members/".concat(_)),j.off("messages/".concat(_))}}),[]);return c.a.createElement("div",{className:"chat_body"},c.a.createElement("div",{className:"chat_body_leave"},c.a.createElement(d.a,{to:"/"},c.a.createElement(E,{title:"Leave Chat"}))),c.a.createElement("div",{className:"chat_body_wrap"},c.a.createElement("div",{className:"chat_body_members"},h.map((function(e,t){return c.a.createElement("span",{key:t},e.user&&e.user.nick)}))),c.a.createElement("div",{className:"chat_body_messages"},c.a.createElement("div",{className:"messages_list"},g.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement("span",{className:"msg_name"},e.user&&e.user.nick),c.a.createElement("span",{className:"msg_msg"},e.message))}))),c.a.createElement("div",{className:"messages_inputs"},c.a.createElement(y.a,{"aria-label":"empty textarea",onChange:function(e){return l(e.target.value)},value:o,className:"message_input"}),c.a.createElement(E,{title:"Send",disabled:!o,onClick:function(){j.emit("send_message",{msgOptions:{type:"public",message:o,chatId:_,userId:t,recipientId:null},userOptions:{chatId:_,userId:t}}),l("")}})))))}))),S=function(){return c.a.createElement(l.c,{history:i},c.a.createElement(l.d,null,c.a.createElement(l.b,{exact:!0,path:"/",component:j}),c.a.createElement(l.b,{path:"/create",component:k}),c.a.createElement(l.b,{path:"/chat/:id",component:w}),c.a.createElement(l.a,{to:"/"})))},x=Object(o.b)((function(e){return{token:e.auth.token}}),{})((function(e){var t=e.token;return c.a.createElement(l.c,{history:i},c.a.createElement("div",{className:"app"},t?c.a.createElement(l.d,null,c.a.createElement(l.b,{path:"/",component:S}),c.a.createElement(l.a,{to:"/"})):c.a.createElement(l.d,null,c.a.createElement(l.b,{exact:!0,path:"/signin",component:O}),c.a.createElement(l.b,{path:"/signup",component:_}),c.a.createElement(l.a,{to:"/signin"}))))})),A=a(92),I=a(18),T=a(62),L=a(97),H=a(93),P=a(94),G=a.n(P),U=a(39),B={user:{},token:null};var R={chats:[]};var D=Object(I.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@auth/SET_AUTH_DATA":return Object(U.a)(Object(U.a)({},e),{},{user:t.payload.user,token:t.payload.token});default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@chat/SET_ALL_CHATS":return Object(U.a)(Object(U.a)({},e),{},{chats:t.payload});default:return e}}}),W=a(16),z=a.n(W),J=a(19),q=a(95),F=a.n(q),M=a(96),$=a.n(M);function K(e){var t=e.method,a=e.url,n=e.data,c=e.params,r=localStorage.getItem("auth"),s={method:t.toLowerCase(),url:"http://localhost:8000"+a,params:c,paramsSerializer:function(e){return $.a.stringify(e,{arrayFormat:"repeat"})}};return n&&(s.data=n),s.headers={"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},r&&(s.headers={Authorization:"Bearer "+r}),F()(s)}var Q=z.a.mark(Y),V=z.a.mark(Z),X=z.a.mark(ee);function Y(e){var t;return z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(J.b)(K,{url:"/signin",method:"POST",data:e.payload});case 3:return t=a.sent,localStorage.setItem("auth",t.data.token),a.next=7,Object(J.c)(g({token:t.data.token,user:t.data.user}));case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),Q,null,[[0,9]])}function Z(e){var t;return z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(J.b)(K,{url:"/signup",method:"POST",data:e.payload});case 3:return t=a.sent,localStorage.setItem("auth",t.data.token),a.next=7,Object(J.c)(g({token:t.data.token,user:t.data.user}));case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),V,null,[[0,9]])}function ee(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(J.d)("@auth/SIGN_IN",Y);case 2:return e.next=4,Object(J.d)("@auth/SIGN_UP",Z);case 4:case"end":return e.stop()}}),X)}var te=z.a.mark(ce),ae=z.a.mark(re),ne=z.a.mark(se);function ce(e){var t;return z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(J.b)(K,{url:"/chats?search=".concat(e.payload),method:"GET"});case 3:return t=a.sent,a.next=6,Object(J.c)({type:"@chat/SET_ALL_CHATS",payload:t.data});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),te,null,[[0,8]])}function re(e){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(J.b)(K,{url:"/chats",method:"POST",data:{name:e.payload.name,creator:e.payload.creator}});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),ae,null,[[0,5]])}function se(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(J.d)("@chat/GET_ALL_CHATS",ce);case 2:return e.next=4,Object(J.d)("@chat/CREATE_CHAT",re);case 4:case"end":return e.stop()}}),ne)}var oe=z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(J.a)([ee(),se()]);case 2:case"end":return e.stop()}}),e)})),le=Object(H.composeWithDevTools)({maxAge:25,latency:1500}),ue=Object(L.a)(),ie={key:"Chat",storage:G.a,blacklist:[]},me=Object(T.a)(ie,D);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=function(){var e=Object(I.createStore)(me,le(Object(I.applyMiddleware)(ue)));return ue.run(oe),{persistor:Object(T.b)(e),store:e}}(),pe=de.persistor,he=de.store,be=function(){s.a.render(c.a.createElement(o.a,{store:he},c.a.createElement(A.a,{persistor:pe},c.a.createElement(x,null))),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",(function(){be()}),!1):be(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);
//# sourceMappingURL=main.5252dc8e.chunk.js.map